<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en" data-bs-theme="auto">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Introduction to Regular Expressions: All in One View</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="../assets/themetoggle.js"></script><link rel="stylesheet" type="text/css" href="../assets/styles.css">
<script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="manifest" href="../site.webmanifest">
<link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" media="(prefers-color-scheme: light)" content="white">
<meta name="theme-color" media="(prefers-color-scheme: dark)" content="black">
</head>
<body>
    <header id="top" class="navbar navbar-expand-md top-nav software"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewbox="0 0 16 16"><path d="M13.854 3.646a.5.5 0 0 1 0 .708l-7 7a.5.5 0 0 1-.708 0l-3.5-3.5a.5.5 0 1 1 .708-.708L6.5 10.293l6.646-6.647a.5.5 0 0 1 .708 0z"></path></symbol><symbol id="circle-half" viewbox="0 0 16 16"><path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"></path></symbol><symbol id="moon-stars-fill" viewbox="0 0 16 16"><path d="M6 .278a.768.768 0 0 1 .08.858 7.208 7.208 0 0 0-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527 0 1.04-.055 1.533-.16a.787.787 0 0 1 .81.316.733.733 0 0 1-.031.893A8.349 8.349 0 0 1 8.344 16C3.734 16 0 12.286 0 7.71 0 4.266 2.114 1.312 5.124.06A.752.752 0 0 1 6 .278z"></path><path d="M10.794 3.148a.217.217 0 0 1 .412 0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217 0 0 1 0 .412l-1.162.387a1.734 1.734 0 0 0-1.097 1.097l-.387 1.162a.217.217 0 0 1-.412 0l-.387-1.162A1.734 1.734 0 0 0 9.31 6.593l-1.162-.387a.217.217 0 0 1 0-.412l1.162-.387a1.734 1.734 0 0 0 1.097-1.097l.387-1.162zM13.863.099a.145.145 0 0 1 .274 0l.258.774c.115.346.386.617.732.732l.774.258a.145.145 0 0 1 0 .274l-.774.258a1.156 1.156 0 0 0-.732.732l-.258.774a.145.145 0 0 1-.274 0l-.258-.774a1.156 1.156 0 0 0-.732-.732l-.774-.258a.145.145 0 0 1 0-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"></path></symbol><symbol id="sun-fill" viewbox="0 0 16 16"><path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0zm0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13zm8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5zM3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8zm10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0zm-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0zm9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707zM4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708z"></path></symbol></svg><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-8">
      <div class="large-logo">
        <img id="swc-logo" alt="Introduction to Regular Expressions" src="../assets/images/software-logo.svg">
</div>
    </div>
    <div class="selector-container">
      <div id="theme-selector">
        <li class="nav-item dropdown" id="theme-button-list">
          <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
            <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="bd-theme-text">
<li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                Light
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                Dark
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
            <li>
              <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                Auto
                <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
            </li>
          </ul>
</li>
      </div>

      <div class="dropdown" id="instructor-dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
<li><button class="dropdown-item" type="button" onclick="window.location.href='../aio.html';">Learner View</button></li>
        </ul>
</div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl bottom-nav software" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Introduction to Regular Expressions" src="../assets/images/software-logo-sm.svg">
</div>
    <div class="lesson-title-md">
      Introduction to Regular Expressions
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
<li class="nav-item">
          <span class="lesson-title">
            Introduction to Regular Expressions
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr></ul>
</li>
      </ul>
</div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a id="search-button" class="btn btn-primary" href="../instructor/aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div>
<!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Introduction to Regular Expressions
</div>

<aside class="col-md-12 lesson-progress"><div style="width: %" class="percentage">
    %
  </div>
  <div class="progress software">
    <div class="progress-bar software" role="progressbar" style="width: %" aria-valuenow="" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row" id="theme-row-mobile">
            <div class="col" id="theme-selector">
              <li class="nav-item dropdown" id="theme-button-list">
                <button class="btn btn-link nav-link px-0 px-lg-2 dropdown-toggle d-flex align-items-center" id="bd-theme" type="button" aria-expanded="false" data-bs-toggle="dropdown" data-bs-display="static" aria-label="Toggle theme (auto)">
                  <svg class="bi my-1 theme-icon-active"><use href="#circle-half"></use></svg><span class="d-lg-none ms-1" id="bd-theme-text">Toggle Theme</span>
                </button>
                <ul class="dropdown-menu dropdown-menu-right" aria-labelledby="bd-theme-text">
<li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="light" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#sun-fill"></use></svg>
                      Light
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center" data-bs-theme-value="dark" aria-pressed="false">
                      <svg class="bi me-2 theme-icon"><use href="#moon-stars-fill"></use></svg>
                      Dark
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                  <li>
                    <button type="button" class="btn dropdown-item d-flex align-items-center active" data-bs-theme-value="auto" aria-pressed="true">
                      <svg class="bi me-2 theme-icon"><use href="#circle-half"></use></svg>
                      Auto
                      <svg class="bi ms-auto d-none"><use href="#check2"></use></svg></button>
                  </li>
                </ul>
</li>
            </div>
          </div>
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../aio.html">Learner View</a>
                      </div>
                    </div>
                  </div>
<!--/div.accordion-item-->
                </div>
<!--/div.accordion-flush-->
              </div>
<!--div.sidenav-view-selector -->
            </div>
<!--/div.col -->

            <hr>
</div>
<!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-intro.html">1. Regular Expressions: The pitch</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-shell-wildcards.html">2. Shell wildcards - a type of regex</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="03-egrep-find.html">3. Pattern matching with grep -E, part 1</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-egrep-charclasses.html">4. Pattern matching with grep -E, part 2</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-sed-substitution.html">5. Find... and replace! With sed.</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-texted-regexs.html">6. Regexs within text editors</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-python-regexs.html">7. Python regular expressions</a>
    </div>
<!--/div.accordion-header-->

  </div>
<!--/div.accordion-item-->
</div>
<!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width">
<div class="accordion accordion-flush lesson-resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="lesson-resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul>
<li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr>
</ul>
</div>
                </div>
              </div>
            </div>
            <hr class="half-width lesson-resources">
<a href="../instructor/aio.html">See all in one page</a>


            <hr class="d-none d-sm-block d-md-none">
<div class="d-grid gap-1">

            </div>
          </div>
<!-- /div.accordion -->
        </div>
<!-- /div.sidebar-inner -->
      </nav>
</div>
<!-- /div.sidebar -->
  </div>
<!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-extra.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <main id="main-content" class="main-content"><div class="container lesson-content">
        
        
<section id="aio-01-intro"><p>Content from <a href="01-intro.html">Regular Expressions: The pitch</a></p>
<hr>
<p>Last updated on 2024-10-25 |

        <a href="https://github.com/csiro-data-school/regex-24/edit/main/episodes/01-intro.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 10 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>What sort of capabilities do regular expressions provide?</li>
<li>What are regular expressions?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Introduce the concept of regular expressions.</li>
<li>Sell the idea of the power of regular expressions.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="what-are-regular-expressions">What are regular expressions?<a class="anchor" aria-label="anchor" href="#what-are-regular-expressions"></a>
</h2>
<hr class="half-width">
<p>In short, a regular expression, or rational expression, or regex for
short, is a sequence of characters that act as a pattern for searching
within text. So, what do we mean by pattern?</p>
<p>Consider a calendar date written down, say, 23/08/2018. We all
recognise a date as being a date when we see one written down this way.
Why? Because there’s a consistent pattern to it. We could describe the
pattern of a date written this way as: one or two digits, a forward
slash, one or two digits, a forward slash, then either 2 digits or 4
digits. Using that pattern of what a date looks like, our eyes can scan
a page of text and pick out other dates.</p>
<p>Regular expressions are a formalisation of such patterns into a
consistent syntax, making use of metacharacters of certain meaning, such
that we can guide a computer to search text in a way that is as specific
or as ambiguous as required. It’s a very powerful tool, being able to
search text for patterns instead of just exact words. Taken further, it
also allows for complex find &amp; replaces, where the replacing is also
following a pattern described with the same syntax.</p>
</section><section><h2 class="section-heading" id="the-pitch">The pitch<a class="anchor" aria-label="anchor" href="#the-pitch"></a>
</h2>
<hr class="half-width">
<p>So, have you ever wanted to pull specific information out of a file,
where a straight search for a specific word or phrase wouldn’t cut it?
Perhaps all you knew was the general “shape” of what you were looking
for. For example, you know there’s a date involved, not what the date
is, but that it would <em>look</em> like a date- day/month/year. Or
maybe it’s part of a specific file format; you know the format’s rules,
but not the contents.</p>
<p>Have you ever wanted to search a file for something, but only
actually print out some <em>different</em> nearby information from the
same line?</p>
<p>Have you ever wanted to make bulk changes to a file, where a simple
‘find &amp; replace’ wouldn’t work? Perhaps you’d like to rename a list
of samples, according to a rule based on their current names. Or fix up
some formatting inconsistencies.</p>
<p>Or have you ever wanted to <em>completely</em> rearrange and modify
lines of a file or program output?</p>
<p>These are the situations that regular expressions make really quick
and easy compared to other solutions.</p>
<p>Here’s an example. We have a list of files in folders, each
representing a sample and replicate in an experiment, with some sample
details incorporated into the file names. We wish to automatically
transform this into a table, listing samples, sample information, and
file details.</p>
<figure><img src="../fig/regexDemo1.png" alt="Regex demo1" width="700" class="figure mx-auto d-block"></figure><p>There are numerous ways to do this, but most solutions would be
multi-part, requiring cutting out different bits of information at a
time.<br>
Using a regular expression, this entire transformation can be done in a
single command:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="st">'s/^(.+\/)(s([0-9]+)-R([0-9]+)_([0-9]+)h-(\w+)\.fasta)/Sample\3\tRep\4\t\5hours\t\6\t\2\t\1/'</span></span></code></pre>
</div>
<p>It’s ugly, but it works (which might be the regular expression
catch-phrase).</p>
<p>This is a regular expression substitution, containing a pattern that
matches each part of our file names and another pattern that defines the
rearrangement. A goal at the end of today will be to understand how this
works and to be able to implement similar effects yourselves.</p>
<p>There have been numerous implementations of regular expressions, but
the major common implementations available today all follow a
mostly-consistent syntax, which is what we’ll be learning. So, for
example, once you learn this regex syntax, you’ll then be able to use it
within certain Unix command line utilities <em>and</em> in Python
<em>and</em> in R. It even works in most text editors too!</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Regexs are powerful tools for searching and transforming text.</li>
<li>A search pattern, using a defined syntax, allows non-specific but
directed matching.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-02-shell-wildcards"><p>Content from <a href="02-shell-wildcards.html">Shell wildcards - a type of regex</a></p>
<hr>
<p>Last updated on 2024-10-25 |

        <a href="https://github.com/csiro-data-school/regex-24/edit/main/episodes/02-shell-wildcards.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 40 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>Are regular expressions available in standard Unix commands?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>(Re)Introduce wildcards available in the Unix shell for file
selection.</li>
<li>‘<code>*</code>’, ‘<code>?</code>’, ‘<code>[ ]</code>’,
‘<code>[! ]</code>’ and ‘<code>{ }</code>’</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>While using a Unix shell, you may have already become familiar with a
simple form of regular expression. Have you ever used a command like
this?</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">ls</span> <span class="pp">*</span>.txt</span></code></pre>
</div>
<p>It’s a searchable pattern which means “match anything that ends in
.txt”. The * works as a wildcard, expanding to match <em>any</em> of
zero or more characters.</p>
<p>However, there are other wildcards available that allow for more
specific and complex patterns.</p>
<section><h2 class="section-heading" id="to-match-any-single-character">‘?’ to match any single character<a class="anchor" aria-label="anchor" href="#to-match-any-single-character"></a>
</h2>
<hr class="half-width">
<p>The ? wildcard matches any character, but always exactly one
character.<br>
For example:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">ls</span> sample<span class="pp">?</span>.txt  </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sample1.txt  sample4.txt  sample7.txt  sampleA.txt  sampleD.txt  sampleY.txt
sample2.txt  sample5.txt  sample8.txt  sampleB.txt  sampleE.txt  sampleZ.txt
sample3.txt  sample6.txt  sample9.txt  sampleC.txt  sampleF.txt</code></pre>
</div>
<div id="try-it-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-1" class="callout-inner">
<h3 class="callout-title">Try it 1</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Write a similar ls command to list .txt files with a 2 digit/char
sample number.<br>
</li>
<li>Write a similar ls command to list for samples specifically in the
range of 10-19.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" aria-labelledby="headingSolution1" data-bs-parent="#accordionSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="fu">ls</span> sample<span class="pp">??</span>.txt</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">ls</span> sample1<span class="pp">?</span>.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>That last challenge was a bit of a gotcha. The solution using ‘?’
would have also picked up a sample “1A”. Not what we were after, but a
good segue for the next concept- matching to a list of options or
ranges.</p>
</section><section><h2 class="section-heading" id="to-match-any-single-character-in-a-list-or-range">‘[ ]’ to match any single character in a list or range<a class="anchor" aria-label="anchor" href="#to-match-any-single-character-in-a-list-or-range"></a>
</h2>
<hr class="half-width">
<p>Use of square brackets <code>[ *list* ]</code> allows matching to a
single character, where that character has to match any of the options
listed between the brackets. The brackets may contain a list, or a
range, or a mix of both. For example, to match any one digit from 0 to
9, the following are equivalent:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="ex">[0123456789]</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="ex">[0-9]</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="ex">[0-789]</span></span></code></pre>
</div>
<p>Ranges work for alphabet characters too. The following are
equivalent:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="ex">[ABCDEFG]</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="ex">[A-G]</span></span></code></pre>
</div>
<p>Important: as always on a Unix shell, case matters! A list of all
alphanumeric characters is:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="ex">[a-zA-Z0-9]</span></span></code></pre>
</div>
<p>So back to our earlier challenge of listing files for sample numbers
10-19.<br>
A better solution may be:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="fu">ls</span> sample1<span class="pp">[</span><span class="ss">0</span><span class="pp">-</span><span class="ss">9</span><span class="pp">]</span>.txt</span></code></pre>
</div>
<p>Remember: an entire ‘[<em>list</em>]’ set will only match a
<em>single</em> listed character at a time.</p>
<div id="try-it-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-2" class="callout-inner">
<h3 class="callout-title">Try it 2</h3>
<div class="callout-content">
<ol start="3" style="list-style-type: decimal">
<li>Write an ls command to list .txt files for samples 2 to 5.<br>
</li>
<li>Write an ls command to list .txt files for samples X, Y and Z and
sample A.<br>
</li>
<li>Write an ls command to list .txt files for samples denoted by a
number followed by a letter (e.g. sample1A).<br>
</li>
<li>Write an ls command to list .txt files for all sample names ending
in a letter.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" aria-labelledby="headingSolution2" data-bs-parent="#accordionSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">ls</span> sample<span class="pp">[</span><span class="ss">2</span><span class="pp">-</span><span class="ss">5</span><span class="pp">]</span>.txt</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="fu">ls</span> sample<span class="pp">[</span><span class="ss">AX</span><span class="pp">-</span><span class="ss">Z</span><span class="pp">]</span>.txt</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="fu">ls</span> sample<span class="pp">[</span><span class="ss">0</span><span class="pp">-</span><span class="ss">9</span><span class="pp">][</span><span class="ss">A</span><span class="pp">-</span><span class="ss">Z</span><span class="pp">]</span>.txt</span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="fu">ls</span> sample<span class="pp">*[</span><span class="ss">A</span><span class="pp">-</span><span class="ss">Z</span><span class="pp">]</span>.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="to-match-any-single-character-not-in-a-list-or-range">‘!’ to match any single character NOT in a list or range<a class="anchor" aria-label="anchor" href="#to-match-any-single-character-not-in-a-list-or-range"></a>
</h2>
<hr class="half-width">
<p>Connected to the square bracket notation is the NOT(!) symbol ‘[! ]’.
Use of a ‘!’ inside ‘[ ]’ makes it match to any single character NOT in
the list.<br>
E.g.:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="ex">[!A]</span></span></code></pre>
</div>
<p>… would match any character that’s not A.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="ex">[!0-9]</span></span></code></pre>
</div>
<p>… would match any character that’s not a digit from 0 to 9.</p>
<div id="try-it-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-3" class="callout-inner">
<h3 class="callout-title">Try it 3</h3>
<div class="callout-content">
<ol start="7" style="list-style-type: decimal">
<li>Write an ls command to list .txt files for all samples
<em>other</em> than those numbered 4 to 7 and 9.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" aria-labelledby="headingSolution3" data-bs-parent="#accordionSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="fu">ls</span> sample<span class="pp">[</span><span class="ss">!4</span><span class="pp">-</span><span class="ss">79</span><span class="pp">]*</span>.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="to-list-whole-word-or-expressions-as-options">‘{ }’ to list whole word or expressions as options<a class="anchor" aria-label="anchor" href="#to-list-whole-word-or-expressions-as-options"></a>
</h2>
<hr class="half-width">
<p>Lastly for this section we have the curly brackets ‘{ }’. Like for
square brackets, curly brackets lets you match to one of the options
listed inside. The difference is, this time we list not just single
characters, but entire words or expressions to choose between.<br>
E.g. ‘{alpha,beta,gamma}’ would match ‘alpha’ and ‘beta’ and
‘gamma’.</p>
<p>Real example:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="fu">ls</span> sample11.<span class="dt">{txt</span><span class="op">,</span><span class="dt">tab</span><span class="op">,</span><span class="dt">csv}</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="ex">sample11.csv</span>  sample11.tab  sample11.txt</span></code></pre>
</div>
<p>You can use other wildcard patterns within the listed options.<br>
So these are equivalent:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="fu">ls</span> <span class="pp">*</span>.<span class="dt">{tab</span><span class="op">,</span><span class="dt">csv}</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="fu">ls</span> <span class="dt">{</span><span class="pp">*</span><span class="dt">.tab</span><span class="op">,</span><span class="pp">*</span><span class="dt">.csv}</span></span></code></pre>
</div>
<p>And these are equivalent:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="fu">ls</span> sample<span class="pp">[</span><span class="ss">A</span><span class="pp">-</span><span class="ss">Z0</span><span class="pp">-</span><span class="ss">9</span><span class="pp">]</span>.txt</span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">ls</span> sample<span class="dt">{[A-Z]</span><span class="op">,</span><span class="dt">[0-9]}</span>.txt</span></code></pre>
</div>
<p>The curly braces actually have their own range capability, even more
powerful in that it allows for more than single digit numbers:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">ls</span> sample<span class="dt">{</span><span class="dv">1</span><span class="dt">..</span><span class="dv">15</span><span class="dt">}</span>.txt</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="fu">ls</span> sample<span class="dt">{</span>A<span class="dt">..</span>C<span class="dt">}</span>.txt</span></code></pre>
</div>
<p>BUT if you’ve spotted the warnings while trying these examples, you
may have guessed the catch with using curly brackets- They
<em>aren’t</em> actually a form of pattern matching! Rather, the first
thing a shell does is expand the brackets out to form <em>all
posibilities</em> listed, in full.</p>
<p>So, when you run the first command below, you’re <em>actually</em>
executing the second command below:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="fu">ls</span> sample<span class="dt">{</span>A<span class="dt">..</span>C<span class="dt">}</span>.txt</span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="fu">ls</span> sampleA.txt sampleB.txt sampleC.txt</span></code></pre>
</div>
<p>Contrast:</p>
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="bu">echo</span> <span class="pp">[</span><span class="ss">A</span><span class="pp">-</span><span class="ss">C</span><span class="pp">][</span><span class="ss">1</span><span class="pp">-</span><span class="ss">3</span><span class="pp">]</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="ex">[A-C][1-3]</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a>  </span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="bu">echo</span> <span class="dt">{</span>A<span class="dt">..</span>C<span class="dt">}{</span><span class="dv">1</span><span class="dt">..</span><span class="dv">3</span><span class="dt">}</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="ex">A1</span> A2 A3 B1 B2 B3 C1 C2 C3</span></code></pre>
</div>
<p>Brace expansion is always the first order of business when the
command line interprets a command. It’s a useful tool, and while not
quite fitting the regular expression theme, the concept of listing
longer options in a this-OR-that fashion will be visited again in proper
regexs.</p>
<div id="try-it-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-4" class="callout-inner">
<h3 class="callout-title">Try it 4</h3>
<div class="callout-content">
<ol start="8" style="list-style-type: decimal">
<li>Write an ls command to list files for samples 8 to 13 and CD.</li>
<li>Write an ls command to list just .csv and .tab files for samples 11
and CD.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" aria-labelledby="headingSolution4" data-bs-parent="#accordionSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">ls</span> sample<span class="dt">{{</span><span class="dv">8</span><span class="dt">..</span><span class="dv">13</span><span class="dt">}</span><span class="op">,</span><span class="dt">CD}</span>.<span class="pp">*</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="fu">ls</span> sample<span class="dt">{11</span><span class="op">,</span><span class="dt">CD}</span>.<span class="dt">{csv</span><span class="op">,</span><span class="dt">tab}</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>While syntax will differ, the concepts learnt here will remain very
relevant as we next move onto more advanced forms of regular
expression.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Use of wildcards in the Unix shell for file selection is a simple
form of regular expressions.</li>
<li>
<code>*</code> matches zero or more characters</li>
<li>
<code>?</code> matches exactly one character</li>
<li>
<code>[ ]</code> matches a character from a list or range of
contained options</li>
<li>
<code>[! ]</code> matches a character NOT in a list or range of
contained options</li>
<li>
<code>{ }</code> expands to produce forms of all listed contained
options</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-03-egrep-find"><p>Content from <a href="03-egrep-find.html">Pattern matching with grep -E, part 1</a></p>
<hr>
<p>Last updated on 2024-10-25 |

        <a href="https://github.com/csiro-data-school/regex-24/edit/main/episodes/03-egrep-find.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 90 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do we write regexs to match complex patterns in files or output
streams?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn the basic syntax of Extended Regular Expressions, using grep
-E</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>You may have used the command ‘grep’ before, which allows you to
search for a matching string. It may be given a file name, to make it
search within a file:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">grep</span> <span class="st">'react'</span> wordplay1.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>class   react   exercise        impartial       heavenly
trees   shelf   amused  reactive        sheet
relation        reacting        handsome        ashamed</code></pre>
</div>
<p>Or it can search piped output from another command:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"Hello Andrew, you are Andrew?"</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-o</span> <span class="st">"Andrew"</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">Andrew</span></span>
<span><span class="va">Andrew</span></span></code></pre>
</div>
<p>In this example, the ‘-o’ flag was used to make grep print only the
matches it finds, rather than whole matching lines. This will be a handy
option when we start testing more ambiguous search patterns later.</p>
<p>For the following lessons, we’ll be making use of grep with a ‘-E’
flag, which enables Extended Regular Expression (ERE) mode for searching
regex patterns. On some systems, an aliased command ‘egrep’ exists. The
regular expression syntax of ‘grep -E’ is the same as that of ‘sed -E’,
which we’ll be using for “find &amp; replace” commands later, and
basically the same as most other implementations of regular
expressions.</p>
<section><h2 class="section-heading" id="for-matching-this-or-that">‘|’ for matching this or that<a class="anchor" aria-label="anchor" href="#for-matching-this-or-that"></a>
</h2>
<hr class="half-width">
<p>Like in the ‘if’ statements of most programming languages, the pipe
character acts as an OR, allowing matching to any of the listed
options.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="st">'boat|bolt|bell'</span> wordplay1.txt </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>bolt    glow    shaky   lumpy   hypnotic
bell    spiritual       materialistic   rule    sponge
exclusive       color   harbor  boat    bedroom</code></pre>
</div>
<p>Round brackets may be used to group terms together. This grouping has
multiple uses, as you’ll see as we continue, but one is to group OR
options together. E.g.:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="st">'b(oat|olt|ell)'</span> wordplay1.txt </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>bolt    glow    shaky   lumpy   hypnotic
bell    spiritual       materialistic   rule    sponge
exclusive       color   harbor  boat    bedroom</code></pre>
</div>
<p>Consider the following:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"ABC"</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'(A|B)C'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">BC</span></span></code></pre>
</div>
<p>Using ‘-o’ to print matching part only, why wasn’t the ‘A’ included
in result? The search pattern asked for either a A or a B which was
followed by a C. Only the B met this criteria.</p>
<div id="try-it-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-1" class="callout-inner">
<h3 class="callout-title">Try it 1</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Write a grep -E command to search wordplay1.txt for either ‘corn’ or
‘cow’</li>
<li>Try the above with -w option enabled (match as whole words
only)</li>
<li>Write a grep -E command to search wordplay1.txt for either
‘reaction’ or ‘reactive’</li>
<li>Write an alternative working answer to 3.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="st">'corn|cow'</span> wordplay1.txt</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-w</span> <span class="st">'corn|cow'</span> wordplay1.txt</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="st">'reaction|reactive'</span> wordplay1.txt</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="st">'reacti(on|ve)'</span> wordplay1.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="to-match-any-single-character-in-a-list-or-range">‘[ ]’ to match any single character in a list or range<a class="anchor" aria-label="anchor" href="#to-match-any-single-character-in-a-list-or-range"></a>
</h2>
<hr class="half-width">
<p>This may sound familiar…</p>
<p>Use of square brackets <code>[ *list* ]</code> allows matching to a
single character, where that character has to match any of the options
listed between the brackets. The brackets may contain a list, or a
range, or a mix of both. For example, to match any one digit from 0 to
9, the following are equivalent:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="ex">[0123456789]</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="ex">[0-9]</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a><span class="ex">[123-789]</span></span></code></pre>
</div>
<p>Ranges work for alphabet characters too. The following are
equivalent:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="ex">[ABCDEFG]</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="ex">[A-G]</span></span></code></pre>
</div>
<p>Important: as always on a Unix shell, case matters! A list of all
alphanumeric characters is:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="ex">[a-zA-Z0-9]</span></span></code></pre>
</div>
<p>Example:</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"bog bag cog cot tog log lag"</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'[a-z]og'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">bog</span></span>
<span><span class="va">cog</span></span>
<span><span class="va">tog</span></span>
<span><span class="va">log</span></span></code></pre>
</div>
<p>Example:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"1952 1986 2003 1995 2018"</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'20[0-9][0-9]'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">2003</span></span>
<span><span class="fl">2018</span></span></code></pre>
</div>
<div id="try-it-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-2" class="callout-inner">
<h3 class="callout-title">Try it 2</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Write a grep -E command to search wordplay1.txt for 4-letter words
ending in ‘oat’</li>
<li>What if you didn’t know if the words started with lower case or
capitol letters?</li>
<li>What if <em>any</em> of the letters could be upper case or lower
case?</li>
<li>Write an alternative working answer to 3.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-w</span> <span class="at">-o</span> <span class="st">'[a-z]oat'</span> wordplay1.txt</span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-w</span> <span class="at">-o</span> <span class="st">'[a-zA-Z]oat'</span> wordplay1.txt</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-w</span> <span class="at">-o</span> <span class="st">'[a-zA-Z][oO][aA][tT]'</span> wordplay1.txt</span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="co"># OR</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-w</span> <span class="at">-o</span> <span class="at">-i</span> <span class="st">'[a-z]oat'</span> wordplay1.txt</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a><span class="co"># grep -i ignores case (see 'man grep')</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>When used within square brackets, a ‘^’ means “NOT”. For example
‘[^ABC]’ would match any one character that <em>wasn’t</em> A or B or
C.</p>
<p>Example:</p>
<div class="codewrapper sourceCode" id="cb20">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"bog bag cog cot tog log lag"</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'[^b][a-z]g'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">cog</span></span>
<span><span class="va">tog</span></span>
<span><span class="va">log</span></span>
<span><span class="va">lag</span></span></code></pre>
</div>
<div id="try-it-3" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-3" class="callout-inner">
<h3 class="callout-title">Try it 3</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Modify your ‘oat’ word finder to find any 4-letter ‘oat’ words other
than ‘boat’ and ‘goat’</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb22">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-w</span> <span class="at">-o</span> <span class="st">'[^bg]oat'</span> wordplay1.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="match-start-of-line-or-end-of-line">Match start of line ^ or end of line $<a class="anchor" aria-label="anchor" href="#match-start-of-line-or-end-of-line"></a>
</h2>
<hr class="half-width">
<p>The ‘^’ symbol has another use. When placed at the start of a regex
pattern, it anchors the pattern such that it must match from the start
of a line.<br>
Similarly, a ‘$’, when placed at the end of a regex pattern, anchors the
pattern such that it must match up to the end of a line.<br>
Consider the following examples demonstrating the effect:</p>
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="st">'repeat'</span> wordplay1.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>repeat  drum    quilt   superficial     uncovered
copper  bad     unpack  repeat  old-fashioned
sheet   accessible      word    enthusiastic    repeat</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb25">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="st">'^repeat'</span> wordplay1.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>repeat  drum    quilt   superficial     uncovered</code></pre>
</div>
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="st">'repeat$'</span> wordplay1.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>sheet   accessible      word    enthusiastic    repeat</code></pre>
</div>
<p>There will be more use for these anchors when we get into more
complex patterns with wildcards.</p>
</section><section><h2 class="section-heading" id="is-the-match-anything-regex-wildcard">‘.’ is the match-anything regex wildcard<a class="anchor" aria-label="anchor" href="#is-the-match-anything-regex-wildcard"></a>
</h2>
<hr class="half-width">
<p>Speaking of, the match-anything wildcard (any single character) for
regular expressions is a period, ‘.’</p>
<p>Consider:</p>
<div class="codewrapper sourceCode" id="cb29">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'.oat'</span> wordplay1.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">boat</span></span>
<span>        <span class="va">oat</span></span>
<span><span class="va">loat</span></span>
<span><span class="va">coat</span></span>
<span><span class="va">goat</span></span></code></pre>
</div>
<p>For the short word “oat”, it was the preceeding tab character that
the wildcard matched.</p>
<p>One more concept to introduce before we get into some better examples
of using this wildcard.</p>
</section><section><h2 class="section-heading" id="matching-multiples-of-things">Matching multiples of things<a class="anchor" aria-label="anchor" href="#matching-multiples-of-things"></a>
</h2>
<hr class="half-width">
<p>What if you wanted to match something that repeated multiple
times?<br>
Any single character, bracket expression or grouping, can be modified to
specify number of occurances, with one of the following:</p>
<table class="table">
<thead><tr class="header">
<th>Symbol(s)</th>
<th>Effect</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>?</td>
<td>Present either one time or <em>no</em> times (0-1)</td>
</tr>
<tr class="even">
<td>*</td>
<td>Present <em>any</em> number of times, including zero (0+)</td>
</tr>
<tr class="odd">
<td>+</td>
<td>Present at least once, but any number of times (1+)</td>
</tr>
<tr class="even">
<td>{n}</td>
<td>Repeated exactly ‘n’ times</td>
</tr>
<tr class="odd">
<td>{n,m}</td>
<td>Repeated between ‘n’ and ‘m’ times</td>
</tr>
<tr class="even">
<td>{n,}</td>
<td>Repeated at least ‘n’ times</td>
</tr>
<tr class="odd">
<td>{,m}</td>
<td>Repeated at most ‘m’ times</td>
</tr>
</tbody>
</table>
<p>For example, what if we wanted to search for ‘colour’ but maybe it
had US spelling?</p>
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="st">'colou?r'</span> wordplay1.txt</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>exclusive       color   harbor  boat    bedroom</code></pre>
</div>
<p>Here the ‘?’ modifier let the preceeding ‘u’ match either one time OR
zero times.</p>
<p>Lets find all words from our words file that are at least 12 letters
long:</p>
<div class="codewrapper sourceCode" id="cb33">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'[a-z]{12,}'</span> wordplay1.txt </span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">materialistic</span></span>
<span><span class="va">distribution</span></span>
<span><span class="va">enthusiastic</span></span>
<span><span class="va">sophisticated</span></span></code></pre>
</div>
<div id="pattern-repetition" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="pattern-repetition" class="callout-inner">
<h3 class="callout-title">Pattern repetition</h3>
<div class="callout-content">
<p>Note, it’s probably clear from the previous example that, when
specifying repetition of a pattern in this way, e.g. “match any letter
from a to z, 12 or more times”, it’s the general ambiguous pattern
concept which is repeated, not a specific matching case. Hence we found
12 lots of “any letter” in a row, rather than “any letter” and then 12
repeats of that letter.</p>
</div>
</div>
</div>
<div id="greediness" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="greediness" class="callout-inner">
<h3 class="callout-title">Greediness</h3>
<div class="callout-content">
<p>Regular expression search patterns are considered “greedy”. That is,
when you use ‘+’ or ‘*’ or ‘{n,}’, they will always match the
<em>longest</em> possible string that still fits the pattern.<br>
E.g. ‘.*’, which means “any character, zero or more times”, will always
match an entire line without further specific context around it.</p>
</div>
</div>
</div>
<div id="try-it-4" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-4" class="callout-inner">
<h3 class="callout-title">Try it 4</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Use ‘grep -E -o’ on wordplay1.txt to match <em>all</em> of any line
that starts with a ‘c’<br>
</li>
<li>Use ‘grep -E -o’ on wordplay1.txt to match the <em>first word</em>
of lines starting with a ‘c’<br>
</li>
<li>Modify previous answer to keep words 5 or 6 letters long only.</li>
<li>Use ‘grep -E -o’ on wordplay1.txt to match both ‘stand’ and
‘outstanding’</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb35">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'^c.+'</span> wordplay1.txt</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'^c[a-z]+'</span> wordplay1.txt</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="at">-w</span> <span class="st">'^c[a-z]{4,5}'</span> wordplay1.txt</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'(out)?stand(ing)?'</span> wordplay1.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<p>What if we wanted to match a date, and didn’t know if the year would
be 2 digits or 4? Our pattern for a date is “a digit, from 0-9, either
one or two of them, then a forward slash, then a digit, either one or
two of them, then either 2 digits OR 4 digits.”</p>
<div class="codewrapper sourceCode" id="cb36">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"11/06/91  not/a/date  5/9/2018"</span> <span class="kw">|</span> <span class="dt">\</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>  <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'[0-9]{1,2}/[0-9]{1,2}/([0-9]{2}|[0-9]{4})'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">11</span><span class="op">/</span><span class="fl">06</span><span class="op">/</span><span class="fl">91</span></span>
<span><span class="fl">5</span><span class="op">/</span><span class="fl">9</span><span class="op">/</span><span class="fl">2018</span></span></code></pre>
</div>
<p>Alternatively, if we were sure about the sensibleness of the contents
we were searching, we may get away with just:</p>
<div class="codewrapper sourceCode" id="cb38">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"11/06/91 5/9/2018"</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'[0-9]+/[0-9]+/[0-9]+'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="fl">11</span><span class="op">/</span><span class="fl">06</span><span class="op">/</span><span class="fl">91</span></span>
<span><span class="fl">5</span><span class="op">/</span><span class="fl">9</span><span class="op">/</span><span class="fl">2018</span></span></code></pre>
</div>
<div id="try-it-5" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-5" class="callout-inner">
<h3 class="callout-title">Try it 5</h3>
<div class="callout-content">
<p>Have a look at ‘namesndates.txt’ (<code>cat namesndates.txt</code>)
1. Use ‘grep -E -o’ on namesndates.txt to list times (e.g. 20:57). 2.
Use ‘grep -E -o’ on namesndates.txt to list all calendar dates. 3.
Consider extra information we know about dates: days will be at most 31,
months at most 12.<br>
Could we use aspects of this information within our regex for more
sensibleness checking?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<blockquote>
<div class="codewrapper sourceCode" id="cb40">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'[0-9]{1,2}:[0-9]{1,2}'</span> namesndates.txt</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'[0-9]{1,2}/[0-9]{1,2}/([0-9]{2}|[0-9]{4})'</span> namesndates.txt</span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'[0-3]?[0-9]/[0-1]?[0-9]/([0-9]{2}|[0-9]{4})'</span> namesndates.txt</span></code></pre>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>grep in Extended Regex mode (or egrep) allows complex pattern
matching in files/streams.</li>
<li>
<code>|</code> acts as an OR between options</li>
<li>
<code>( )</code> allows grouping, e.g. for OR modifier, with
quantifiers, etc..</li>
<li>
<code>[ ]</code> matches a character from a list or range of
contained options</li>
<li>
<code>[^ ]</code> matches a character NOT in a list or range of
contained options</li>
<li>
<code>^</code> at the start of a regex means match at start of
line</li>
<li>
<code>$</code> at the end of a regex means match at end of line</li>
<li>
<code>.</code> is the match-all (any single character) wildcard</li>
<li>
<code>?</code> quantifies previous character or group as occurring
zero or one time</li>
<li>
<code>*</code> quantifies previous character or group as occurring
zero or more times</li>
<li>
<code>+</code> quantifies previous character or group as occurring
one or more times</li>
<li>
<code>{n,m}</code> quantifies previous character or group as
occurring between n and m times</li>
<li>Quantifiers are greedy- will always match longest possible fit.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-04-egrep-charclasses"><p>Content from <a href="04-egrep-charclasses.html">Pattern matching with grep -E, part 2</a></p>
<hr>
<p>Last updated on 2024-10-25 |

        <a href="https://github.com/csiro-data-school/regex-24/edit/main/episodes/04-egrep-charclasses.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 60 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do we use predefined character classes for more complex search
patterns?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn to incorporate predefined character classes into regular
expressions.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="predefined-character-classes">Predefined character classes<a class="anchor" aria-label="anchor" href="#predefined-character-classes"></a>
</h2>
<hr class="half-width">
<p>The Extended Regular Expression syntax has a number of predefined
character groupings that may be written as a word, rather than a
collection or range of characters.<br>
For example, you may write <code>[[:digit:]]</code> instead of writing
<code>[0-9]</code>.</p>
<table class="table">
<thead><tr class="header">
<th>Written as</th>
<th>Equivalent to</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>[[:digit:]]</td>
<td>[0-9]</td>
</tr>
<tr class="even">
<td>[[:alpha:]]</td>
<td>[a-zA-Z]</td>
</tr>
<tr class="odd">
<td>[[:alnum:]]</td>
<td>[a-zA-Z0-9]</td>
</tr>
<tr class="even">
<td>[[:upper:]]</td>
<td>[A-Z]</td>
</tr>
<tr class="odd">
<td>[[:lower:]]</td>
<td>[a-z]</td>
</tr>
<tr class="even">
<td>[[:space:]]</td>
<td>Spaces, tabs, in some contexts new-lines</td>
</tr>
<tr class="odd">
<td>[[:graph:]]</td>
<td>Any printable character other than space</td>
</tr>
<tr class="even">
<td>[[:punct:]]</td>
<td>Any printable character other than space or [a-zA-Z0-9]</td>
</tr>
</tbody>
</table>
<div id="why" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="why" class="callout-inner">
<h3 class="callout-title">Why?</h3>
<div class="callout-content">
<p>Why would you write <code>[[:digit:]]</code> instead of writing
<code>[0-9]</code>? Or <code>[[:upper:]]</code> instead of
<code>[A-Z]</code>? In general, for our use, there’s little difference
other than readability/style. The difference comes if you need to make
things more universal, as Arabic-numerals are not the only number system
in use around the world and the 26-letter English alphabet is not the
only writing system. So, for example, while <code>[0-9]</code> will
always just be those specific 10 characters, <code>[[:digit:]]</code>
may have multiple alternate numeric systems encoded.</p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="regex-shorthand-escape-symbols">Regex shorthand escape symbols<a class="anchor" aria-label="anchor" href="#regex-shorthand-escape-symbols"></a>
</h2>
<hr class="half-width">
<p>The other way you may refer to predefined character classes, and the
way you will likely most commonly do so from here on, is using the
following shorthands, formed by “escaping” certain characters with a
backslash. For example ‘\w’ can be used to match to any “word”
character, which means any letter, number, or (counterintuitively) an
underscore.<br>
The shorthand symbols available are:</p>
<table class="table">
<colgroup>
<col width="50%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Written as</th>
<th>Equivalent to</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>\w</td>
<td>“Word” character [a-zA-Z0-9] OR a _ (underscore)</td>
</tr>
<tr class="even">
<td>\W</td>
<td>[^\w] Inverse of \w, any non-“word” character</td>
</tr>
<tr class="odd">
<td>\s</td>
<td>Spaces, tabs, in some contexts new-lines</td>
</tr>
<tr class="even">
<td>\S</td>
<td>[^\s] Inverse of \s, any non-space character</td>
</tr>
<tr class="odd">
<td>\b</td>
<td>Boundary between “words” and “spaces” (0-length)</td>
</tr>
<tr class="even">
<td>\B</td>
<td>[^\b] In the middle of a “word” or multiple “spaces” (0-length)</td>
</tr>
<tr class="odd">
<td>\&lt;</td>
<td>Boundary at <em>start</em> of “word” between “words” and “spaces”
(0-length)</td>
</tr>
<tr class="even">
<td>\&gt;</td>
<td>Boundary at <em>end</em> of “word” between “words” and “spaces”
(0-length)</td>
</tr>
</tbody>
</table>
<p>Those last four are considered “anchors”. They don’t actually match
characters, but they can give a regex pattern more context, helping to
orientate components. For example, a letter being specifically at the
start of a word.</p>
<p>The following are also commonly used within regex syntax (e.g. will
work in Python or R), but <strong>are not understood by grep or
sed</strong>:</p>
<table class="table">
<thead><tr class="header">
<th>Written as</th>
<th>Equivalent to</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>\d</td>
<td>[0-9] A digit</td>
</tr>
<tr class="even">
<td>\D</td>
<td>[^0-9] Not a digit</td>
</tr>
<tr class="odd">
<td>\t</td>
<td>A tab character (does work in some version of sed, test yours)</td>
</tr>
<tr class="even">
<td>\n</td>
<td>A newline, if program supports multi-line matching</td>
</tr>
</tbody>
</table>
<p>Here are some examples.<br>
The first two words of a line (start of line, word, space(s), word):</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'word1 word_2 thirdWord'</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'^\w+\s+\w+'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>word1 word_2</code></pre>
</div>
<p>A word with spaces at both ends:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'word1 word_2 thirdWord!?'</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'\s\w+\s'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span> <span class="va">word_2</span> </span></code></pre>
</div>
<p>Every set of consecutive non-space characters:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'word1 word_2 thirdWord!?'</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'\S+'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>word1
word_2
thirdWord!?</code></pre>
</div>
<p>Everything up to the boundary of the last word:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'word1 word_2 thirdWord!?'</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'.+\&lt;'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>word1 word_2  </code></pre>
</div>
<p>The middle characters of each word (bounded by
not-a-word-boundary):</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'word1 word_2 thirdWord!?'</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'\B\w+\B'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">ord</span></span>
<span><span class="va">ord_</span></span>
<span><span class="va">hirdWor</span></span></code></pre>
</div>
<div id="try-it-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-1" class="callout-inner">
<h3 class="callout-title">Try it 1</h3>
<div class="callout-content">
<ol style="list-style-type: decimal">
<li>Use ‘grep -E -o’ on wordplay1.txt to print the first 2 words of any
line using<br>
</li>
</ol>
<ol style="list-style-type: lower-alpha">
<li>[[:alpha:]] and [[:space:]]<br>
</li>
<li>\w and \s<br>
</li>
<li>\S and \s<br>
</li>
</ol>
<ol start="2" style="list-style-type: decimal">
<li>Use ‘grep -E -o’, with \w and \b, on wordplay1.txt to print a word
that starts with ‘p’ and ends with ‘g’.<br>
</li>
<li>Use ‘grep -E’, with \w and \&lt;, on wordplay1.txt to highlight the
first letter of every word.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'^[[:alpha:]]+[[:space:]]+[[:alpha:]]+'</span> wordplay1.txt </span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'^\w+\s+\w+'</span> wordplay1.txt  </span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'^\S+\s+\S+'</span> wordplay1.txt</span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'\bp\w+g\b'</span> wordplay1.txt</span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="st">'\&lt;\w'</span> wordplay1.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="tab-characters" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="tab-characters" class="callout-inner">
<h3 class="callout-title">Tab characters</h3>
<div class="callout-content">
<p>There are a few options for getting a tab character to work with grep
or sed on a bash command line (if a space ‘\s’ or word boundary anchor
will not be specific enough):<br>
1. On some systems, pressing ctrl+v followed by tab, will insert a
literal tab character.<br>
2. On some systems, a literal tab could be copy and pasted in from a
text editor.<br>
3. A dollar sign in front of pattern can enable escape character
interpretation in bash, based on ANSI-C rules, where ‘\t’ is a
tab.<br>
E.g. <code>echo $'|\t|'</code> OR <code>grep -E $'\t'</code><br>
This last option is neatest, but beware other conflicting escape
character interpretations in this mode, meaning that to use ‘\w’ or ‘\b’
etc., you will need to double-escape them, with two slashes.<br>
E.g. for a word with tabs either side:
<code>grep -E $'\t\\w+\t'</code></p>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="capturing-groups-and-back-references">Capturing groups and back-references<a class="anchor" aria-label="anchor" href="#capturing-groups-and-back-references"></a>
</h2>
<hr class="half-width">
<p>We’d mentioned earlier that round brackets ( ) have multiple uses.
One use is to “capture” a match seen within the round brackets,
remembering the contents of what matched within, such that a copy of the
contents may be referred to again. We’ll make much use of this feature
in the next lesson, for find-n-replace substitutions! Within grep
though, a “back-reference” to a captured group can be used to identify
something that repeats identically within a line. The reference to the
previously seen item is used in the form ‘\number’. It works like
this:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'blah1 blah2 blah2 blah4?'</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'(\w+)\s+\1'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>blah2 blah2</code></pre>
</div>
<p>Here a word ‘\w+’ is “captured” by the round brackets, is followed by
space, then is referenced again by ‘\1’, which represents a stored copy
of what was originally matched by the ‘\w+’. Hence this grep only
matches a case where a word is followed by another copy of that same
word.</p>
<p>If we’d like to make multiple back-references, we use multiple pairs
of round brackets and increment our back-reference number by one for
each open bracket from left-to-right. E.g.:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'blah1 blah2 blah2 blah4?'</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'([a-z]+)([0-9])\s+\1\2'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>blah2 blah2</code></pre>
</div>
<p>We had the same outcome, but stored letters part “blah” separate to
the digits part “2”, then referred to the two captured parts as ‘\1’ and
‘\2’ respectively.</p>
<p>Consider the following:</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">'ABCDEFGGFEDCBA'</span> <span class="kw">|</span> <span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'(\w)(\w)(\w)\3\2\1'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">EFGGFE</span></span></code></pre>
</div>
<p>Our pattern matched to three letters, then to those same three
letters repeated again, but <em>in reverse order</em>!</p>
<div id="try-it-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-2" class="callout-inner">
<h3 class="callout-title">Try it 2</h3>
<div class="callout-content">
<ol start="4" style="list-style-type: decimal">
<li>Grep ‘wordplay1.txt’ to print the only line that contains the same
word repeated twice. Hint: You may need to use the ‘\b’ word-boundary
anchor.</li>
<li>Grep ‘namesndates.txt’ to print the name of a person whose firstname
and surname start with the same letter.</li>
<li>Grep ‘namesndates.txt’ to print a date where the month and the day
are the same number.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb18">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="st">'\b(\w+)\b.+\b\1\b'</span> wordplay1.txt</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'^(\w)\w+\s\1\w+'</span> namesndates.txt</span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="fu">grep</span> <span class="at">-E</span> <span class="at">-o</span> <span class="st">'([0-9]{2})/\1/[0-9]{4}'</span> namesndates.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>grep in Extended Regex mode has a number of predefined character
classes:</li>
<li><code>[:alpha:]  [:alnum:]  [:digit:]  [:upper:]  [:lower:]  [:punct:]  [:space:]</code></li>
<li>and escape-character enabled shorthand character classes and
anchors:</li>
<li>
<code>\w</code> : Word character [a-zA-Z0-9] OR a _
(underscore)</li>
<li>
<code>\W</code> : <code>[^\w]</code> Inverse of \w, any non-word
character</li>
<li>
<code>\s</code> : Spaces, tabs, in some contexts new-lines</li>
<li>
<code>\S</code> : <code>[^\s]</code> Inverse of \s, any non-space
character</li>
<li>
<code>\b</code> : Boundary between adjacent word and space, 0-length
anchor</li>
<li>
<code>\B</code> : <code>[^\b]</code> In the middle of a word or
multiple spaces, 0-length anchor</li>
<li>
<code>\&lt;</code> : Boundary at <em>start</em> of word between word
and space, 0-length anchor</li>
<li>
<code>\&gt;</code> : Boundary at <em>end</em> of word between word
and space, 0-length anchor</li>
<li>You can refer back to an exact copy of a matched (group) using \1,
\2, etc..</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-05-sed-substitution"><p>Content from <a href="05-sed-substitution.html">Find... and replace! With sed.</a></p>
<hr>
<p>Last updated on 2024-10-25 |

        <a href="https://github.com/csiro-data-school/regex-24/edit/main/episodes/05-sed-substitution.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 120 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How do we find and replace content using regex patterns?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Learn regex substitutions using sed.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="regex-substitution-syntax">Regex substitution syntax<a class="anchor" aria-label="anchor" href="#regex-substitution-syntax"></a>
</h2>
<hr class="half-width">
<p>Regex substitutions allow you to use the pattern syntax we’ve learned
so far to describe complex ‘find &amp; replace’ operations. For the
following exercises we’ll be using the program ‘sed’, but the
substitution syntax is common to other implementations too. It’s
this:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="st">'s/pattern/replacement/'</span></span></code></pre>
</div>
<p>‘s’ for substitution. The ‘pattern’ component is as we’ve been using
with ‘grep -E’ so far; the same concept and syntax, describing a pattern
to be matched. The ‘replacement’ component is what will replace a match
of the pattern.</p>
<p>E.g. Substitute “hello” for “goodbye” would be:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="st">'s/hello/goodbye/'</span></span></code></pre>
</div>
</section><section><h2 class="section-heading" id="sed-for-regex-substitutions">Sed for regex substitutions<a class="anchor" aria-label="anchor" href="#sed-for-regex-substitutions"></a>
</h2>
<hr class="half-width">
<p>‘sed’ is a Unix command line utility, name short for “stream editor”.
It will parse text passed to it, from a file or piped input stream, and
can perform various transformations to the text. It has many different
capabilities, as can be found in the sed manual. Today we’ll just be
playing with the regular expression substitution capability. We’ll be
using ‘sed -E’, which enables the same “Extended Regular Expression”
syntax as we’d been using with ‘grep -E’.</p>
<p>There are a few ways to use it:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Modify stream from another program, print result</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="ex">other-command</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/pat/replace/'</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="co"># Read input file, print contents with changes</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/pat/replace/'</span> inFile</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="co"># Read input file, write contents with changes to another file</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/pat/replace/'</span> inFile <span class="op">&gt;</span> outFile</span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="co"># Read input file, write with changes to the same file (caution!)</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="at">-i</span> <span class="st">'s/pat/replace/'</span> file</span></code></pre>
</div>
<p>Example:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"hello Andrew"</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/Andrew/Bob/'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>hello Bob</code></pre>
</div>
<p>All of our regex pattern capabilities still work:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"hello Andrew"</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/A\w+/Bob/'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>hello Bob</code></pre>
</div>
<p>We replace the entirety of what we match:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"hello Andrew"</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/.+/A whole new line/'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>A whole new line</code></pre>
</div>
<p>Only the first possible extended match is replaced:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"hello Andrew"</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/\w+/blah/'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>blah Andrew</code></pre>
</div>
<p>However, a greedy mode may be enabled which keeps looking for
subsequent matches to replace, by adding a ‘g’ to the end of your
substitution string:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"hello Andrew"</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/\w+/blah/g'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>blah blah</code></pre>
</div>
<p>The replacement section is allowed to be empty too:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"hello    Andrew"</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/\s+//g'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="va">helloAndrew</span></span></code></pre>
</div>
<div id="try-it-1" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-1" class="callout-inner">
<h3 class="callout-title">Try it 1</h3>
<div class="callout-content">
<p>Using <code>sed -E 's/ / /g' wordplay1.txt</code>…</p>
<ol style="list-style-type: decimal">
<li>Replace all vowels (a,e,i,o,u) with ‘oo’</li>
<li>Replace all words longer than 4 characters with ‘blah’</li>
<li>Replace an <em>entire line</em> if it has any words longer than 4
characters with “had long words” (as a literal phrase)</li>
<li>Insert “Some words:” (as a literal phrase) at the start of every
line.</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/[aeiou]/oo/g'</span> wordplay1.txt</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/\w{5,}/blah/g'</span> wordplay1.txt</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/.*\w{5,}.*/had long words/'</span> wordplay1.txt</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/^/Some words: /'</span> wordplay1.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</section><section><h2 class="section-heading" id="making-use-of-back-references">Making use of back-references<a class="anchor" aria-label="anchor" href="#making-use-of-back-references"></a>
</h2>
<hr class="half-width">
<p>Recall with grep we could “capture” or remember a part of a match by
encasing it in round brackets ‘<span class="math inline">\(\)</span>’
and then refer back to an exact copy of what was matched, using ‘\1’ for
the first bracketed group, ‘\2’ for second bracketed group, etc.. Such
back-references may also be used within the replacement section of a
substitution. This is how we start doing more interesting find and
replaces.</p>
<p>For example, we could add an exclamation mark after every word:</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"hello Andrew"</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/(\w+)/\1!/g'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>hello! Andrew!</code></pre>
</div>
<p>The back-reference is necessary, so that we can define the
replacement as being “the same as what we matched, plus an exclamation
mark.”</p>
<p>Another example, we could swap every second word:</p>
<div class="codewrapper sourceCode" id="cb19">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"one two three four"</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/(\w+) (\w+)/\2 \1/g'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>two one four three</code></pre>
</div>
<p>We separately capture two adjacent words, then in the replacement,
refer back to them in reverse order.</p>
<p>Remember that the entirety of a matched pattern is replaced. So if we
do something like this, where a ‘.+’ matches the whole rest of the line,
then the whole rest of the line is replaced.</p>
<div class="codewrapper sourceCode" id="cb21">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="bu">echo</span> <span class="st">"one two three four"</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/(\w+) (\w+).+/\2 \1/g'</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>two one</code></pre>
</div>
<div id="try-it-2" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it-2" class="callout-inner">
<h3 class="callout-title">Try it 2</h3>
<div class="callout-content">
<p>Using <code>sed -E 's/ / /g' wordplay1.txt</code>…</p>
<ol start="5" style="list-style-type: decimal">
<li>Replace all vowels (a,e,i,o,u) with two copies of that same
vowel</li>
<li>Switch the places of the first and second word on each line</li>
<li>Switch the places of the first and last word on each line, while
retaining everything between</li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2"> Show me the solution </h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb23">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/([aeiou])/\1\1/g'</span> wordplay1.txt</span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/^(\w+)\t(\w+)/\2\t\1/'</span> wordplay1.txt</span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/^(\w+)(.+)\b(\w+)/\3\2\1/'</span> wordplay1.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="forward-slashes" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="forward-slashes" class="callout-inner">
<h3 class="callout-title">Forward slashes</h3>
<div class="callout-content">
<p>Note that, as a substitution pattern is bookended by forward slashes,
there will be a conflict if you actually want to include a literal
forward slash. There are two ways of handling this.<br>
1. Escape your literal forward slash with a back slash, ensuring it acts
as a literal character.<br><code>\/</code><br>
2. Alternatively, you can actually use any other character to bookend
the substitution! E.g.:<br><code>'s;pattern;replacement;'</code><br>
or<br><code>'s#pattern#replacement#'</code><br>
If doing this, choose a character that won’t otherwise appear in your
substitution string and that doesn’t have any other special meaning.</p>
</div>
</div>
</div>
<div id="try-it---date-format-conversion" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it---date-format-conversion" class="callout-inner">
<h3 class="callout-title">Try it - date format conversion</h3>
<div class="callout-content">
<p>Complete the following, to convert dates in namesndates.txt from
dd/mm/yyyy format, into yymmdd format. E.g. change 23/08/2012 into
120823.<br><code>sed -E 's; ; ;' namesndates.txt</code></p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3"> Show me the solution </h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<blockquote>
<div class="codewrapper sourceCode" id="cb24">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s;([0-9]{2})/([0-9]{2})/[0-9]{2}([0-9]{2});\3\2\1;'</span> namesndates.txt</span></code></pre>
</div>
</blockquote>
</div>
</div>
</div>
</div>
<div id="try-it---make-a-fasta-file" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it---make-a-fasta-file" class="callout-inner">
<h3 class="callout-title">Try it - make a FASTA file</h3>
<div class="callout-content">
<p>DNA and RNA sequences are often represented in the “FASTA” format,
which looks like:</p>
<pre><code>&gt;seqID
ATCGTACGTAGCTACGT</code></pre>
<p>The file ‘dnaSequences.txt’ contains DNA sequences in a tab-separated
format:</p>
<pre><code>seqID    ATCGTACGTAGCTACGT</code></pre>
<ol style="list-style-type: decimal">
<li><p>Use sed to convert dnaSequences.txt sequences into a FASTA format
representation. Hint: ‘\n’ may be used in the replacement pattern to
insert a newline.</p></li>
<li><p>Some sequences may be very long. Can you make it so that there’s
never more than 20 characters per line, with longer sequences split over
multiple lines?</p></li>
</ol>
</div>
</div>
</div>
<div id="accordionSolution4" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution4" aria-expanded="false" aria-controls="collapseSolution4">
  <h4 class="accordion-header" id="headingSolution4"> Show me the solution </h4>
</button>
<div id="collapseSolution4" class="accordion-collapse collapse" data-bs-parent="#accordionSolution4" aria-labelledby="headingSolution4">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb27">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/(\S+)\s+(\w+)/&gt;\1\n\2/'</span> dnaSequences.txt</span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/(\S+)\s+(\w+)/&gt;\1\n\2/'</span> dnaSequences.txt <span class="kw">|</span> <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/(\w{20})/\1\n/g'</span></span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="try-it---fixing-a-file" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it---fixing-a-file" class="callout-inner">
<h3 class="callout-title">Try it - Fixing a file</h3>
<div class="callout-content">
<p>Have another look at ‘namesndates.txt’
(<code>cat namesndates.txt</code>)</p>
<p>A number of typos and inconsistencies were made when adding rows to
‘namesndates.txt’:<br>
1. One row has a name written as “surname, firstname”, instead of
“firstname surname”.<br>
2. One row has a date written in “dd-mm-yyyy” format instead of
“dd/mm/yyyy” format.<br>
3. One row is comma-separated, while the rest are tab-separated.<br>
4. Some rows have multiple spaces, or a mix of tabs and spaces, in place
of just single tabs.<br>
(<code>cat -T namesndates.txt</code> can help distinguish tabs from
spaces)</p>
<p>Using multiple piped sed substitutions, can you correct all of these
mistakes?</p>
</div>
</div>
</div>
<div id="accordionSolution5" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution5" aria-expanded="false" aria-controls="collapseSolution5">
  <h4 class="accordion-header" id="headingSolution5"> Show me the solution </h4>
</button>
<div id="collapseSolution5" class="accordion-collapse collapse" data-bs-parent="#accordionSolution5" aria-labelledby="headingSolution5">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb28">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/^(\w+), (\w+)/\2 \1/'</span> namesndates.txt <span class="kw">|</span> <span class="dt">\</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>  <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s;([0-9]{2})-([0-9]{2})-([0-9]{4});\1/\2/\3;'</span> <span class="kw">|</span> <span class="dt">\</span></span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a>  <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/,/\t/g'</span> <span class="kw">|</span> <span class="dt">\</span></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a>  <span class="fu">sed</span> <span class="at">-E</span> <span class="st">'s/\s{2,}/\t/g'</span> <span class="op">&gt;</span> namesndates-FIXED.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="prototyping-solutions" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="prototyping-solutions" class="callout-inner">
<h3 class="callout-title">Prototyping solutions</h3>
<div class="callout-content">
<p>Tips for turning longer complex strings into regular expression
substitutions:<br>
1. Start by copying a real example of a whole string into your pattern
section.<br>
2. Add escape back slashes to any forward slashes, literal brackets,
etc., as necessary.<br>
3. “Circle” the parts of the string you’d like to separately retain,
with round brackets.<br>
4. Write out your replacement pattern, using back-reference to what you
circled.<br>
5. At this stage, the substitution should work, but only for the
specific real example string that you’ve started with.<br>
6. Finally, start abstracting your search pattern, replacing parts of
your example string with wild-cards or character-classes as needed, to
strike the balance between specificity and ambiguity required to match
all that you want and not all that you don’t want.</p>
</div>
</div>
</div>
<div id="try-it---information-from-file-names" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it---information-from-file-names" class="callout-inner">
<h3 class="callout-title">Try it - information from file names</h3>
<div class="callout-content">
<p>‘fileExample1.txt’ contains the input text from the first regex
example in the intro of this course. Can you recreate that
transformation?<br>
Convert this list of files (fileExample1.txt)…</p>
<pre><code>/path/to/my/data/folder1/s1-R1_6h-shade.fasta
/path/to/my/data/folder1/s2-R1_6h-sun.fasta
/path/to/my/data/folder1/s3-R1_24h-shade.fasta
/path/to/my/data/folder1/s4-R1_24h-sun.fasta
/path/to/my/data/folder2/s1-R2_6h-shade.fasta
/path/to/my/data/folder2/s2-R2_6h-sun.fasta
/path/to/my/data/folder2/s3-R2_24h-shade.fasta
/path/to/my/data/folder2/s4-R2_24h-sun.fasta</code></pre>
<p>…into this table of sample information:</p>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>Sample1 Rep1    6hours  shade   s1-R1_6h-shade.fasta    /path/to/my/data/folder1/
Sample2 Rep1    6hours  sun     s2-R1_6h-sun.fasta      /path/to/my/data/folder1/
Sample3 Rep1    24hours shade   s3-R1_24h-shade.fasta   /path/to/my/data/folder1/
Sample4 Rep1    24hours sun     s4-R1_24h-sun.fasta     /path/to/my/data/folder1/
Sample1 Rep2    6hours  shade   s1-R2_6h-shade.fasta    /path/to/my/data/folder2/
Sample2 Rep2    6hours  sun     s2-R2_6h-sun.fasta      /path/to/my/data/folder2/
Sample3 Rep2    24hours shade   s3-R2_24h-shade.fasta   /path/to/my/data/folder2/
Sample4 Rep2    24hours sun     s4-R2_24h-sun.fasta     /path/to/my/data/folder2/</code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution6" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution6" aria-expanded="false" aria-controls="collapseSolution6">
  <h4 class="accordion-header" id="headingSolution6"> Show me the solution </h4>
</button>
<div id="collapseSolution6" class="accordion-collapse collapse" data-bs-parent="#accordionSolution6" aria-labelledby="headingSolution6">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb31">
<h3 class="code-label">BASH<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode bash" tabindex="0"><code class="sourceCode bash"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="fu">sed</span> <span class="at">-E</span> <span class="dt">\</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a><span class="st">'s/^(.+\/)(s([0-9]+)-R([0-9]+)_([0-9]+)h-(\w+)\.fasta)/Sample\3\tRep\4\t\5hours\t\6\t\2\t\1/'</span> <span class="dt">\</span></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>    fileExample1.txt</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li><code>sed -E 's/pattern/replacement/'</code></li>
<li>
<code>'s/pattern/replacement/g'</code> - enables Greedy, replace-all
mode.</li>
<li>Use grouping () in pattern and back-reference \1 in
replacement…</li>
<li>… to rearrange or recontextualise parts of the matched input.</li>
<li>Tips for writing complex substitutions:</li>
<li>1- Start with a complete real example pasted as your pattern.</li>
<li>2- Escape ‘\’ any forward slashes, literal brackets, etc., as
necessary.</li>
<li>3- Circle the parts to retain, with round brackets.</li>
<li>4- Write your replacement rules, using back-references.</li>
<li>5- Substitution should now work for your specific real example.</li>
<li>6- Abstract pattern with wildcards, etc., to make ambiguous enough
for all required cases.</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section><section id="aio-06-texted-regexs"><p>Content from <a href="06-texted-regexs.html">Regexs within text editors</a></p>
<hr>
<p>Last updated on 2024-10-25 |

        <a href="https://github.com/csiro-data-school/regex-24/edit/main/episodes/06-texted-regexs.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 5 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can we invoke regular expressions within certain text
editors?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Introduce regex substitutions implemented in text editors,
e.g. Nano, VSCode, Notepad++, etc…</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Regular expressions, for both searching and substituting, with all
the capabilities we’ve looked at today, are fully implemented in many
modern text editors.</p>
<p>For example, on Windows: Visual Studio Code, Notepad++, Sublime
Text…</p>
<p>Patterns follow all the same syntax you’ve learnt using grep and sed.
However, you’ll usually find that the following patterns work that
didn’t work with Grep:</p>
<table class="table">
<thead><tr class="header">
<th>Written as</th>
<th>Equivalent to</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>\d</td>
<td>[0-9] A digit</td>
</tr>
<tr class="even">
<td>\D</td>
<td>[^0-9] Not a digit</td>
</tr>
<tr class="odd">
<td>\t</td>
<td>A tab character</td>
</tr>
<tr class="even">
<td>\n</td>
<td>A newline, if program supports multi-line matching</td>
</tr>
</tbody>
</table>
<p>In some text editors, for example VSCode, back-reference variables
are referred to with a ‘$’ sign instead of a backslash. E.g. instead of
\1 and \2, you use $1 and $2. Experiment with your favourite text editor
to see which it expects.</p>
<p>In Nano, find and replace options are listed at the bottom of the
screen as <code>^W Where Is</code> and <code>^\ Replace</code>
respectively, which in Windows corresponds to <code>Ctrl+W</code> for
Find or <code>Ctrl+\</code> for Replace.<br>
Once either is enabled a new option for toggling Regex mode on or off is
listed at the bottom: <code>M-R Reg.exp.</code>. This command (Meta+R)
corresponds to <code>Alt+R</code> on Windows.<br>
Toggling Regex mode on will change the prompt from <code>Search:</code>
to <code>Search [Regexp]:</code>.<br>
With Regex mode on, all the same syntax from grep and sed should work,
including using \1, \2, etc. to reference groups captured by round
brackets when doing a replace.</p>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Regular expression capabilities are incorporated in most modern text
editors for find and replace.</li>
</ul>
</div>
</div>
</div></section><section id="aio-07-python-regexs"><p>Content from <a href="07-python-regexs.html">Python regular expressions</a></p>
<hr>
<p>Last updated on 2024-10-25 |

        <a href="https://github.com/csiro-data-school/regex-24/edit/main/episodes/07-python-regexs.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
<p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 10 minutes</p>
<div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>
<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul>
<li>How can we invoke regular expressions using Python?</li>
</ul>
</div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul>
<li>Introduce regex capabilities in Python.</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<p>Regular expressions, with search, replace and other capabilities, are
available in through Python through the ‘re’ library. E.g.
<code>import re</code>.</p>
<p>Patterns follow all the same syntax you’ve learnt using grep and sed.
However, you’ll usually find that the following patterns work that
didn’t work with Grep:</p>
<table class="table">
<thead><tr class="header">
<th>Written as</th>
<th>Equivalent to</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>\d</td>
<td>[0-9] A digit</td>
</tr>
<tr class="even">
<td>\D</td>
<td>[^0-9] Not a digit</td>
</tr>
<tr class="odd">
<td>\t</td>
<td>A tab character</td>
</tr>
<tr class="even">
<td>\n</td>
<td>A newline</td>
</tr>
</tbody>
</table>
<p>Python regexs, using the ‘re’ library, are implemented through
functions, where search patterns and strings are given as function
arguments.</p>
<section><h2 class="section-heading" id="searching">Searching<a class="anchor" aria-label="anchor" href="#searching"></a>
</h2>
<hr class="half-width">
<p>The grep equivalent is the function re.search().<br><code>match = re.search( pattern, string )</code><br>
The returned match object looks “true” if there was a match and has
functions for interrogating aspects of the match, for example individual
bracketed groups matched and span range of matched parts.</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>myString <span class="op">=</span> <span class="st">'word1 1234 word2'</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>match <span class="op">=</span> re.search(<span class="vs">r'\b(\d+) (\w+)'</span>, myString)</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="cf">if</span> match:</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>    <span class="bu">print</span>(match.group(<span class="dv">0</span>))</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a>    <span class="bu">print</span>(match.span(<span class="dv">0</span>))</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a>    <span class="bu">print</span>(match.group(<span class="dv">1</span>))</span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a>    <span class="bu">print</span>(match.group(<span class="dv">2</span>))</span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="cf">else</span>:</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a>    <span class="bu">print</span>(<span class="st">"No Match"</span>)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>1234 word2
(6, 16)
1234
word2</code></pre>
</div>
<p>Note the ‘r’ in front of the search pattern,
<code>r'\b(\d+) (\w+)'</code>. This enables the pattern string to be
passed to the re function in its literal form, which prevents
backslashes being being interpreted as escapes too early,
<em>before</em> the function looks at it. Without the preceeding ‘r’,
double-backslashes would be necessary.<br>
E.g. <code>'\\b(\\d+) (\\w+)'</code></p>
</section><section><h2 class="section-heading" id="splitting">Splitting<a class="anchor" aria-label="anchor" href="#splitting"></a>
</h2>
<hr class="half-width">
<p>A neat ‘re’ feature is splitting of a string into an array of
substrings, using a regex as a delimiter, instead of just a literal
comma or tab or space, etc.. With this functionality, you can, for
example, split up a line into individual words, using a regex “anything
that’s not a word” as the delimiter for the split.</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>listOfWords <span class="op">=</span> re.split(<span class="vs">r'\W+'</span>, <span class="st">'word_1 $%^ 1234,word2-word3'</span>)</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="bu">print</span>(listOfWords)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>['word_1', '1234', 'word2', 'word3']</code></pre>
</div>
</section><section><h2 class="section-heading" id="substituting">Substituting<a class="anchor" aria-label="anchor" href="#substituting"></a>
</h2>
<hr class="half-width">
<p>Substitution commands in Python ‘re’ take the form:<br><code>newstring = re.sub( pattern, replacement, string )</code><br>
Again, both the pattern and replacement/back-reference syntax is as
we’ve learnt already.</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>oldstring <span class="op">=</span> <span class="st">'Four 123 Five'</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>newstring <span class="op">=</span> re.sub( <span class="vs">r'(\w+)\s+(\d+)\s+(\w+)'</span>, <span class="vs">r'\2-\1-\3'</span>, oldstring )</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="bu">print</span>(newstring)</span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">OUTPUT<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code><span><span class="st">'123-Four-Five'</span></span></code></pre>
</div>
<div id="re-manual" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="re-manual" class="callout-inner">
<h3 class="callout-title">RE Manual</h3>
<div class="callout-content">
<p>More reference for the Python ‘re’ library may be found at: <a href="https://docs.python.org/3/library/re.html" class="external-link uri">https://docs.python.org/3/library/re.html</a></p>
</div>
</div>
</div>
<div id="try-it---reformatting-a-file-using-python" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="try-it---reformatting-a-file-using-python" class="callout-inner">
<h3 class="callout-title">Try it - Reformatting a file using Python</h3>
<div class="callout-content">
<p>Write a Python script that reads through the file
‘namesndates_v2.txt’ and, for each line, rearranges it to the following
format (using re.sub), and prints the result:<br><code>month-year: surname,firstname @ place</code></p>
<p>For example, the line…<br><code>Neve Erindale   23/08/2012      20:57   Coombs</code><br>
…should be printed as:<br><code>08-2012: Erindale,Neve @ Coombs</code></p>
<p>Hints: 1. <code>\t</code> may be used to match the tab characters
used between the fields in the input file. 2. Basic Python file
reading:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(filename) <span class="im">as</span> inFile:</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>  <span class="cf">for</span> line <span class="kw">in</span> inFile:</span></code></pre>
</div>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1"> Show me the solution </h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="im">import</span> re</span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="cf">with</span> <span class="bu">open</span>(<span class="st">'namesndates_v2.txt'</span>) <span class="im">as</span> inFile:</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a>  <span class="cf">for</span> line <span class="kw">in</span> inFile:</span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a>    rearranged <span class="op">=</span> re.sub( <span class="vs">r'^(\w+) (\w+)\t\d+/(\d+)/(\d+)\t\S+\t(.+)'</span>, <span class="vs">r'\3-\4: \2,\1 @ \5'</span>, line )</span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>    <span class="bu">print</span>(rearranged, end<span class="op">=</span><span class="st">""</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points</h3>
<div class="callout-content">
<ul>
<li>Regular expressions through Python:</li>
<li><code>import re</code></li>
<li><code>match = re.search(r'pattern', 'string')</code></li>
<li>OR</li>
<li><code>list = re.split(r'pattern', 'string')</code></li>
<li>OR</li>
<li><code>re.sub( r'pattern', r'replacement', 'string' )</code></li>
<li>Reference: <a href="https://docs.python.org/3/library/re.html" class="external-link uri">https://docs.python.org/3/library/re.html</a>
</li>
</ul>
</div>
</div>
</div>
<!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 -->
</section></section>
</div>
    </main>
</div>
<!-- END  : inst/pkgdown/templates/content-extra.html -->

      </div>
<!--/div.row-->
      		<footer class="row footer mx-md-3"><hr>
<div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>

        <a href="https://github.com/csiro-data-school/regex-24/edit/main/README.md" class="external-link">Edit on GitHub</a>

	
        | <a href="https://github.com/csiro-data-school/regex-24/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/csiro-data-school/regex-24/" class="external-link">Source</a></p>
				<p><a href="https://github.com/csiro-data-school/regex-24/blob/main/CITATION.cff" class="external-link">Cite</a> | <a href="mailto:david.spadaro@csiro.au">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.9" class="external-link">sandpaper (0.16.9)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.6" class="external-link">pegboard (0.7.6)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.4" class="external-link">varnish (1.0.4)</a></p>
			</div>
		</footer>
</div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://csiro-data-school.github.io/regex-24/instructor/aio.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "regex, regular expressions, grep, sed",
  "name": "All in One View",
  "creativeWorkStatus": "active",
  "url": "https://csiro-data-school.github.io/regex-24/instructor/aio.html",
  "identifier": "https://csiro-data-school.github.io/regex-24/instructor/aio.html",
  "dateCreated": "2024-10-21",
  "dateModified": "2024-10-25",
  "datePublished": "2024-10-25"
}

  </script><script>
		feather.replace();
	</script>
</body>
</html><!-- END:   inst/pkgdown/templates/layout.html-->

